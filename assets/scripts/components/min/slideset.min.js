!function(t){var i;window.FatKit&&(i=t(FatKit)),"function"==typeof define&&define.amd&&define("fatkit-slideset",["fatkit"],function(){return i||t(FatKit)})}(function(t){"use strict";function i(i,e,s,n){var a,o,r,l,h=t.$.Deferred(),f=this.options.delay===!1?Math.floor(this.options.duration/2):this.options.delay;if(n=n||1,s[0]===e[0])return h.resolve(),h.promise();if("object"==typeof i?(a=i[0],o=i[1]||i[0]):(a=i,o=a),r=function(){for(e&&e.length&&e.hide().removeClass(o+" f-animation-reverse").css({opacity:"","animation-delay":"",animation:""}),l=0;l<s.length;l++)s.eq(1==n?l:s.length-l-1).css("animation-delay",l*f+"ms");s.addClass(a)[1==n?"last":"first"]().one(t.support.animation.end,function(){s.removeClass(""+a).css({opacity:"",display:"","animation-delay":"",animation:""}),h.resolve()}).end().css("display","")},s.css("animation-duration",this.options.duration+"ms"),e&&e.length)for(e.css("animation-duration",this.options.duration+"ms")[1==n?"last":"first"]().one(t.support.animation.end,function(){r()}),l=0;l<e.length;l++)!function(t,i){setTimeout(function(){i.css("display","none").css("display","").css("opacity",0).addClass(o+" f-animation-reverse")}.bind(this),l*f)}(l,e.eq(1==n?l:e.length-l-1));else r();return h.promise()}function e(t,i){var e,s=0,n=-1,a=t.length||0,o=[];if(1>i)return null;for(;a>s;)e=s%i,e?o[n][e]=t[s]:o[++n]=[t[s]],s++;for(s=0,a=o.length;a>s;)o[s]=jQuery(o[s]),s++;return o}var s;t.component("slideset",{defaults:{"default":1,animation:"fade",duration:200,filter:"",delay:!1,controls:!1},sets:[],boot:function(){t.ready(function(i){t.$("[data-f-slideset]",i).each(function(){var i=t.$(this);if(!i.data("slideset")){t.slideset(i,t.Utils.options(i.attr("data-f-slideset")))}})})},init:function(){var i=this;this.activeSet=!1,this.list=this.element.find(".f-slideset"),this.nav=this.element.find(".f-slideset-nav"),t.$win.on("resize load",t.Utils.debounce(function(){i.updateSets()},100)),i.list.addClass("f-grid-width-1-"+i.options.default),["xlarge","large","medium","small"].forEach(function(t){i.options[t]&&i.list.addClass("f-grid-width-"+t+"-1-"+i.options[t])}),this.on("click.fatkit.slideset","[data-f-slideset-item]",function(e){if(e.preventDefault(),!i.animating){var s=t.$(this).attr("data-f-slideset-item");if(i.activeSet!==s)switch(s){case"next":case"previous":i["next"==s?"next":"previous"]();break;default:i.show(s)}}}),this.currentFilter=this.options.filter,this.controls=this.options.controls?t.$(this.options.controls):this.element,this.controls.on("click.fatkit.slideset","[data-f-filter]",function(e){e.preventDefault();var s=t.$(this);i.animating||s.parent().hasClass("f-slideset")||(i.currentFilter=s.attr("data-f-filter"),i.updateSets(!0,!0))}),this.on("swipeRight swipeLeft",function(t){i["swipeLeft"==t.type?"next":"previous"]()}),this.updateSets()},updateSets:function(i,s){var n,a=this,o=this.visible;if(this.visible=this.getVisibleOnCurrenBreakpoint(),o!=this.visible||s){for(this.children=this.list.children().hide(),this.items=this.getItems(),this.sets=e(this.items,this.visible),n=0;n<this.sets.length;n++)this.sets[n].css({display:"none"});if(this.nav.length&&this.nav.empty()){for(n=0;n<this.sets.length;n++)this.nav.append('<li data-f-slideset-item="'+n+'"><a></a></li>');this.nav[1==this.nav.children().length?"addClass":"removeClass"]("f-invisible")}var r;this.controls.find("[data-f-filter]").each(function(){r=t.$(this),r.parent().hasClass("f-slideset")||(r.attr("data-f-filter")==a.currentFilter?r.addClass("f-active"):r.removeClass("f-active"))}),this.activeSet=!1,this.show(0,!i)}},getVisibleOnCurrenBreakpoint:function(){var i=null,e=t.$('<div style="position:absolute;height:1px;top:-1000px;width:100px"><div></div></div>').appendTo("body"),s=e.children().eq(0),n=this.options;return["xlarge","large","medium","small"].forEach(function(t){n[t]&&!i&&(e.attr("class","f-grid-width-"+t+"-1-2").width(),50==s.width()&&(i=t))}),e.remove(),this.options[i]||this.options["default"]},getItems:function(){var i,e=[];return this.currentFilter?(i=this.currentFilter||[],"string"==typeof i&&(i=i.split(/,/).map(function(t){return t.trim()})),this.children.each(function(){var s=t.$(this),n=s.attr("data-f-filter"),a=i.length?!1:!0;n&&(n=n.split(/,/).map(function(t){return t.trim()}),i.forEach(function(t){n.indexOf(t)>-1&&(a=!0)})),a&&e.push(s[0])}),e=t.$(e)):e=this.list.children(),e},show:function(e,n){var a=this;if(this.activeSet!==e&&!this.animating){var o=this.sets[this.activeSet]||[],r=this.sets[e],l=s[this.options.animation]||function(t,e){if(!a.options.animation)return s.none.apply(a);var n=a.options.animation.split(",");return 1==n.length&&(n[1]=n[0]),n[0]=n[0].trim(),n[1]=n[1].trim(),i.apply(a,[n,t,e])};(n||!t.support.animation)&&(l=s.none),a.animating=!0,a.nav.length&&a.nav.children().removeClass("f-active").eq(e).addClass("f-active"),l.apply(a,[o,r,e<this.activeSet?-1:1]).then(function(){t.Utils.checkDisplay(r,!0),a.children.hide().removeClass("f-active"),r.addClass("f-active").css({display:"",opacity:""}),a.animating=!1,a.activeSet=e,t.Utils.checkDisplay(r,!0),a.trigger("show.f.slideset",[r])})}},next:function(){this.show(this.sets[this.activeSet+1]?this.activeSet+1:0)},previous:function(){this.show(this.sets[this.activeSet-1]?this.activeSet-1:this.sets.length-1)}}),s={none:function(){var i=t.$.Deferred();return i.resolve(),i.promise()},fade:function(t,e){return i.apply(this,["f-animation-fade",t,e])},"slide-bottom":function(t,e){return i.apply(this,["f-animation-slide-bottom",t,e])},"slide-top":function(t,e){return i.apply(this,["f-animation-slide-top",t,e])},"slide-vertical":function(t,e,s){var n=["f-animation-slide-top","f-animation-slide-bottom"];return-1==s&&n.reverse(),i.apply(this,[n,t,e])},"slide-horizontal":function(t,e,s){var n=["f-animation-slide-right","f-animation-slide-left"];return-1==s&&n.reverse(),i.apply(this,[n,t,e,s])},scale:function(t,e){return i.apply(this,["f-animation-scale-up",t,e])}},t.slideset.animations=s});