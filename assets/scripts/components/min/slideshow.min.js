!function(i){var s;window.FatKit&&(s=i(FatKit)),"function"==typeof define&&define.amd&&define("fatkit-slideshow",["fatkit"],function(){return s||i(FatKit)})}(function(i){"use strict";var s;i.component("slideshow",{defaults:{animation:"fade",duration:500,height:"auto",start:0,autoplay:!1,autoplayInterval:7e3,videoautoplay:!0,videomute:!0,kenburns:!1,slices:15,pauseOnHover:!0},current:!1,interval:null,hovering:!1,boot:function(){i.ready(function(s){i.$("[data-f-slideshow]",s).each(function(){var s=i.$(this);if(!s.data("slideshow")){i.slideshow(s,i.Utils.options(s.attr("data-f-slideshow")))}})})},init:function(){var s,t=this;this.container=this.element.hasClass("f-slideshow")?this.element:i.$(this.find(".f-slideshow")),this.slides=this.container.children(),this.slidesCount=this.slides.length,this.current=this.options.start,this.animating=!1,this.triggers=this.find("[data-f-slideshow-item]"),this.fixFullscreen=navigator.userAgent.match(/(iPad|iPhone|iPod)/g)&&this.container.hasClass("f-slideshow-fullscreen"),this.slides.each(function(e){var a=i.$(this),n=a.children("img,video,iframe").eq(0);if(a.data("media",n),a.data("sizer",n),n.length){var o;switch(n[0].nodeName){case"IMG":var r=i.$('<div class="f-cover-background f-position-cover"></div>').css({"background-image":"url("+n.attr("src")+")"});n.css({width:"100%",height:"auto"}),a.prepend(r).data("cover",r);break;case"IFRAME":var d=n[0].src;n.attr("src","").on("load",function(){(e!==t.current||e==t.current&&!t.options.videoautoplay)&&t.pausemedia(n),t.options.videomute&&(t.mutemedia(n),setTimeout(function(){t.mutemedia(n)},1e3))}).attr("src",[d,d.indexOf("?")>-1?"&":"?","enablejsapi=1&api=1"].join("")).addClass("f-position-absolute"),i.support.touch||n.css("pointer-events","none"),o=!0,i.cover&&(i.cover(n),n.attr("data-f-cover","{}"));break;case"VIDEO":n.addClass("f-cover-object f-position-absolute"),o=!0,t.options.videomute&&t.mutemedia(n)}if(o){s=i.$("<canvas></canvas>").attr({width:n[0].width,height:n[0].height});var h=i.$('<img style="width:100%;height:auto;">').attr("src",s[0].toDataURL());a.prepend(h),a.data("sizer",h)}}else a.data("sizer",a)}),this.on("click.fatkit.slideshow","[data-f-slideshow-item]",function(s){s.preventDefault();var e=i.$(this).attr("data-f-slideshow-item");if(t.current!=e){switch(e){case"next":case"previous":t["next"==e?"next":"previous"]();break;default:t.show(parseInt(e,10))}t.stop()}}),this.slides.eq(this.current).addClass("f-active"),this.triggers.filter('[data-f-slideshow-item="'+this.current+'"]').addClass("f-active"),i.$win.on("resize load",i.Utils.debounce(function(){t.resize(),t.fixFullscreen&&(t.container.css("height",window.innerHeight),t.slides.css("height",window.innerHeight))},100)),this.resize(),this.options.autoplay&&this.start(),this.options.videoautoplay&&this.slides.eq(this.current).data("media")&&this.playmedia(this.slides.eq(this.current).data("media")),this.options.kenburns&&this.applyKenBurns(this.slides.eq(this.current)),this.container.on({mouseenter:function(){t.options.pauseOnHover&&(t.hovering=!0)},mouseleave:function(){t.hovering=!1}}),this.on("swipeRight swipeLeft",function(i){t["swipeLeft"==i.type?"next":"previous"]()}),this.on("display.f.check",function(){t.element.is(":visible")&&(t.resize(),t.fixFullscreen&&(t.container.css("height",window.innerHeight),t.slides.css("height",window.innerHeight)))})},resize:function(){if(!this.container.hasClass("f-slideshow-fullscreen")){var s=this.options.height;"auto"===this.options.height&&(s=0,this.slides.css("height","").each(function(){s=Math.max(s,i.$(this).height())})),this.container.css("height",s),this.slides.css("height",s)}},show:function(t,e){if(!this.animating){this.animating=!0;var a=this,n=this.slides.eq(this.current),o=this.slides.eq(t),r=e?e:this.current<t?-1:1,d=n.data("media"),h=s[this.options.animation]?this.options.animation:"fade",c=o.data("media"),l=function(){a.animating&&(d&&d.is("video,iframe")&&a.pausemedia(d),c&&c.is("video,iframe")&&a.playmedia(c),o.addClass("f-active"),n.removeClass("f-active"),a.animating=!1,a.current=t,i.Utils.checkDisplay(o,'[class*="f-animation-"]:not(.f-cover-background.f-position-cover)'),a.trigger("show.f.slideshow",[o]))};a.applyKenBurns(o),i.support.animation||(h="none"),n=i.$(n),o=i.$(o),s[h].apply(this,[n,o,r]).then(l),a.triggers.removeClass("f-active"),a.triggers.filter('[data-f-slideshow-item="'+t+'"]').addClass("f-active")}},applyKenBurns:function(i){if(this.hasKenBurns(i)){var s=["f-animation-middle-left","f-animation-top-right","f-animation-bottom-left","f-animation-top-center","","f-animation-bottom-right"],t=this.kbindex||0;i.data("cover").attr("class","f-cover-background f-position-cover").width(),i.data("cover").addClass(["f-animation-scale","f-animation-reverse","f-animation-15",s[t]].join(" ")),this.kbindex=s[t+1]?t+1:0}},hasKenBurns:function(i){return this.options.kenburns&&i.data("cover")},next:function(){this.show(this.slides[this.current+1]?this.current+1:0)},previous:function(){this.show(this.slides[this.current-1]?this.current-1:this.slides.length-1)},start:function(){this.stop();var i=this;this.interval=setInterval(function(){i.hovering||i.show(i.options.start,i.next())},this.options.autoplayInterval)},stop:function(){this.interval&&clearInterval(this.interval)},playmedia:function(i){if(i&&i[0])switch(i[0].nodeName){case"VIDEO":this.options.videomute||(i[0].muted=!1),i[0].play();break;case"IFRAME":this.options.videomute||i[0].contentWindow.postMessage('{ "event": "command", "func": "unmute", "method":"setVolume", "value":1}',"*"),i[0].contentWindow.postMessage('{ "event": "command", "func": "playVideo", "method":"play"}',"*")}},pausemedia:function(i){switch(i[0].nodeName){case"VIDEO":i[0].pause();break;case"IFRAME":i[0].contentWindow.postMessage('{ "event": "command", "func": "pauseVideo", "method":"pause"}',"*")}},mutemedia:function(i){switch(i[0].nodeName){case"VIDEO":i[0].muted=!0;break;case"IFRAME":i[0].contentWindow.postMessage('{ "event": "command", "func": "mute", "method":"setVolume", "value":0}',"*")}}}),s={none:function(){var s=i.$.Deferred();return s.resolve(),s.promise()},scroll:function(s,t,e){var a=i.$.Deferred();return s.css("animation-duration",this.options.duration+"ms"),t.css("animation-duration",this.options.duration+"ms"),t.css("opacity",1).one(i.support.animation.end,function(){s.removeClass(1===e?"f-slideshow-scroll-backward-out":"f-slideshow-scroll-forward-out"),t.css("opacity","").removeClass(1===e?"f-slideshow-scroll-backward-in":"f-slideshow-scroll-forward-in"),a.resolve()}.bind(this)),s.addClass(1==e?"f-slideshow-scroll-backward-out":"f-slideshow-scroll-forward-out"),t.addClass(1==e?"f-slideshow-scroll-backward-in":"f-slideshow-scroll-forward-in"),t.width(),a.promise()},swipe:function(s,t,e){var a=i.$.Deferred();return s.css("animation-duration",this.options.duration+"ms"),t.css("animation-duration",this.options.duration+"ms"),t.css("opacity",1).one(i.support.animation.end,function(){s.removeClass(1===e?"f-slideshow-swipe-backward-out":"f-slideshow-swipe-forward-out"),t.css("opacity","").removeClass(1===e?"f-slideshow-swipe-backward-in":"f-slideshow-swipe-forward-in"),a.resolve()}.bind(this)),s.addClass(1==e?"f-slideshow-swipe-backward-out":"f-slideshow-swipe-forward-out"),t.addClass(1==e?"f-slideshow-swipe-backward-in":"f-slideshow-swipe-forward-in"),t.width(),a.promise()},scale:function(s,t){var e=i.$.Deferred();return s.css("animation-duration",this.options.duration+"ms"),t.css("animation-duration",this.options.duration+"ms"),t.css("opacity",1),s.one(i.support.animation.end,function(){s.removeClass("f-slideshow-scale-out"),t.css("opacity",""),e.resolve()}.bind(this)),s.addClass("f-slideshow-scale-out"),s.width(),e.promise()},fade:function(s,t){var e=i.$.Deferred();return s.css("animation-duration",this.options.duration+"ms"),t.css("animation-duration",this.options.duration+"ms"),t.css("opacity",1),s.one(i.support.animation.end,function(){s.removeClass("f-slideshow-fade-out"),t.css("opacity",""),e.resolve()}.bind(this)),s.addClass("f-slideshow-fade-out"),s.width(),e.promise()}},i.slideshow.animations=s});